import java.sql.*;

/**
 * @author Vladislav Romanov
 */

//TODO: Connection pool.

class Authorization {

    protected static String driverName = "com.mysql.jdbc.Driver";
    protected static String url = "jdbc:mysql://localhost:3306/IPControllerDB";
    protected static String name = "root";
    protected static String password = "vlad007.1996@yandex.ru";

    private static String signInQuery = "SELECT * FROM  `Users` WHERE  `email` LIKE  '%email' AND  `password` LIKE  '%password'";

    public boolean signIn(String email, String password) {

        //TODO: Email and password are can't to consist some symbols. E.g. '?', '"', ';'. 

        Connection connection = null;
        ResultSet result;
        String res = null;

        try {
            Class.forName(driverName);
            connection = DriverManager.getConnection(url, name, password);
            Statement statement = connection.createStatement();

            String query = signInQuery.replaceAll("%email", email).replaceAll("%password", password);
            result = statement.executeQuery(query);

            res = result.getString("id");
        } catch (Exception ex) {
            //TODO Logger
            return false;
        } finally {
            if (connection != null) {
                try {
                    connection.close();
                } catch (SQLException ex) {
                    //TODO Logger
                }
            }
        }
        System.out.println(res);
        return true; 
    }

    private static String signUpQuery = "INSERT INTO  `IPControllerDB`.`Users` (`email` ,`password`) VALUES ('%email',  '%password');";

    public boolean signUp(String email, String password) {
        //TODO: Sign up.
        return false;
    }

}